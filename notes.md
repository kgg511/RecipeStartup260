1/10/2024: code repositories


ls -la
show hidden directories. Use to see .git

-git checkout to go back to a previous version
-you can edit/commit changes directly from github
-git fetch: see latest info about changes on git
-git status: see the differences b/t clone and see if we’re missing a commit. 
Also tells us if we added stuff but haven’t yet committed.
-git -am “message” : Adds all new files and then commits with the message

print “more text” >> hello.txt means concatenate to the file
print “more text” > hello.txt means overwrite
git diff HEAD HEAD~1 //compare version with previous version
git log
Merge Conflicts


Configure your own commands:
git config --global -l
alias.s=status
alias.l=log --all --graph --decorate --oneline --pretty=format:'%C(bold 
red)%d%Creset %cr %C(bold yellow)%h%Creset - %C(green)%an%Creset %s'
pull.rebase=true
core.editor=code



-readme.md: Use to describe modifications and alterations you make to 
startup.
-notes.md: track what you have learned. will be used for the midterm/final

Fork: Create a copy of a github repository. Maintains a link to the original 
repository so you can pull down updates.

**1/19: EC2**
http://52.87.41.204/
ssh -i cs260/[filename] ubuntu@52.87.41.204
ssh -i cs260/[filename] ubuntu@tastetrove.click

**1/22: Caddy, HTTPS, TLS, and certificates**
Caddy
web service that listens for HTTP requests. Once received, it either gives the requested static files or routes the files to another web service (gateway/reverse proxy)
creation/rotation of web certificates
serves all static HTML/CSS/JS

FILES
Configuration file: ~/Caddyfile: for routing HTTP requests, determine location of HTML files,etc. Don’t change.
HTML files: ~/public_html: directory of files that Caddy servers up when requests are made
ex: request http://yourdomainname/index.html looks for index.html in public_html

HTTPS, TLS, and web certificates
HTTPS: HTTP with negotiated secure connection that happens before data is exchanged. All data encrypted w TLS protocol (negotiate shared secret and use to encrypt)
negotiation includes exchange of web certificate that identifies the dns of the server creating the server connection. Browser makes sure that certificate name matches domain name in URL.

Web Certificates
generated by 3rd party using private key encryption
once you have certificate for domain name, browser can validate
Let’s encrypt lets you make a web certificate for free.
Caddy: uses lets encrypt to generate a web certificate every time a HTTPS request is made for a domain that Caddy doesn’t have a certificate for. It then asks lets encrypt to verify that the domain is owned by the requester

curl -v -s https://byu.edu > /dev/null //see the negotiation that happens

EDIT Caddy configuration:
cd ~
vi Caddyfile
i //then make changes
esc
:wq + enter
sudo service caddy restart

**1/24: The Console, editors**
pwd: tells you what directory you are in
ls -la: see all files including hidden ones
echo - Output the parameters of the command
cd - Change directory
mkdir - Make directory
rmdir - Remove directory
rm - Remove file(s)
mv - Move file(s)
cp - Copy files
ls - List files
curl - Command line client URL browser
grep - Regular expression search
find - Find files
top - View running processes with CPU and memory usage
df - View disk statistics
cat - Output the contents of a file
less - Interactively output the contents of a file
wc - Count the words in a file
ps - View the currently running processes
kill - Kill a currently running process
sudo - Execute a command as a super user (admin)
ssh - Create a secure shell on a remote computer
scp - Securely copy files to a remote computer
history - Show the history of commands
ping - Check if a website is up
tracert - Trace the connections to a website
dig - Show the DNS information for a domain
man - Look up a command in the manual


|: Take output from command on left and pass as input to command on right
>: redirect output to file, overwrite file if exists
>>: redirect output to file, append to if exists.

Editors
VScode: editor for daily coding 
VI: when you are shelled into your production environment and need a simple, but powerful, console based editor for quickly editing text files.

VI
To use: change directory to one with some code to edit.
vi index.html
command mode: default. 
To edit, type i to enter insert mode,
esc to escape,  :w to save, :q to quit
https://vim.rtorr.com/

VIM commands
:h -> help
i -> insert mode. Use ESC to exit
u -> undo
ctrl-r -> redo
gg -> go to beginning of file
G -> go to end of file
/ -> search for patterns
n -> next search match
N -> previous search match
v -> visually select text
y -> yank/copy selected text to clipboard
p -> past clipboard
ctrl -wv -> split window vertically
crl -ww -> toggle windows
ctrl -wq -> close current window
:e -> open file
:w -> write file (save)
:q -> quit, :q! to not save

**1/26: codePen, HTML intro, structure, input, media**
CodePen: immediately renders code in preview window

To submit assignments that use codpen
create new pen or fork existing example
do stuff, saving occasionally
submit pen URL in canvas w something you learned

HTML introduction    MDN HTML
Text is valid in html. HTML is mostly about structure
elements have open/close tags
each HTML element has attributes
class: designates the element as classified into name group of elements
<p id="hello" class="greeting">Hello world</p>

hyperlink: anchor a with attribute href
<a href="https://byu.edu">Go to the Y</a>

doctype at the top to tell browser the type and version of the document
<!DOCTYPE html>
<html lang="en">
  <body>
    <main>
      <h1>Hello world</h1>
      <p class="introduction">
        HTML welcomes you to the amazing world of
        <span class="topic">web programming</span>.
      </p>
      <p class="question">What will this mean to you?</p>
      <p class="assignment">Learn more <a href="instruction.html">here</a>.</p>
    </main>
  </body>
</html>
<!-- commented text -->

list of HTML elements HTML introduction
| Element | Meaning                                      |
| ------- | -------------------------------------------- |
| html    | page container                              |
| head    | header info                                 |
| title   | title of page                               |
| meta    | metadata for page like character set or viewport settings |
| script  | javascript reference. External reference or inline |
| include | external content reference                  |
| body    | entire content body of the page             |
| header  | header of main content                      |
| footer  | footer of main content                      |
| nav     | navigational inputs                         |
| main    | main content                                |
| section | section of main content                     |
| aside   | aside content from main content             |
| div     | block division of content                   |
| span    | inline span of content                      |
| h<1-9>  | text heading, h1 is largest size           |
| p       | paragraph of text                           |
| b       | bring attention                             |
| table   | Table                                       |
| tr      | table row                                   |
| th      | table header                                |
| td      | table data                                  |
| ol, ul  | ordered/unordered                          |
| li      | list item                                   |
| a       | anchor text to hyperlink                    |
| img     | image                                       |
| dialog  | interactive component like confirmation    |
| form    | collection of user input                    |
| input   | user input field                            |
| audio   | audio                                       |
| video   | video                                       |
| svg     | scalable vector graphic content             |
| iframe  | inline frame of another HTML page           |

EXAMPLE TABLE 
<!--
<table border="1">
    <tr>
        <th>Header 1</th>
        <th>Header 2</th>
        <th>Header 3</th>
    </tr>
    <tr>
        <td>Data 1</td>
        <td>Data 2</td>
        <td>Data 3</td>
    </tr>
</table>
-->
canIUse
Special characters
if request https://google.com you get index.html

Special characters
<!--
& -> &amp;
< -> &lt;
> -> &gt;
“ -> &quot;
‘ -> &apos;
emoji -> &#128512;
-->

☑ Structure
common structure elements: body, header, footer, main, section aside, p, table, ol/ul, div, and span
block element: distinct block in flow of structure
inline element: do not disrupt flow. Might just be in the middle of a line.

☑ Input
form: input container and submission <form action=”form.html” method=”post>
fieldset: labeled input group
input: multiple types of user input <input type = “” />
select: selection drop down <select><option>1</option></select>
optgroup: grouped selection dropdown: <optgroup><option>1</option></optgroup>
option: selection option <option selected>option2</option>
textarea: multiline: <textarea></textarea>
label: individual input label: <label for = “range”>Range: </label>
output: output of input: <output for = “range”>0</output>
meter: display value w known range <meter min = “0” max=”100” value=”50”></meter>

-form: 
<form action="submission.html" method="post">
  <label for="ta">TextArea: </label>
  <textarea id="ta" name="ta-id">
Some text
  </textarea>
  <button type="submit">Submit</button>
</form>

-input element: set it using the type attribute
<label for="checkbox1">Check me</label> <input type="checkbox" name="varCheckbox" value="checkbox1" checked />

EXAMPLE input
<input type="text" name="username" placeholder="Enter your username">

![input](notes/a.png)

some input elements have built-in validation.
required attribute to say that there has to be value inside
pattern attribute for text/search/url/tel/email/password to provide regex for input
☑ Media
img, audio, video, svg, canvas
media tags referencing external media have url as attribute. Keep link as relative as possible (not full link) 
Audio, controls attribute to let user able to control playback, autoplay, loop
<audio controls src="testAudio.mp3"></audio>
video: video element, src controls autoplay
<video controls width="300" crossorigin="anonymous">
  <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" />
</video>

internal media: svg, canvas
svg: scalable vector graphics
<svg viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg" stroke="red" fill="red" style="border: 1px solid #000000">
  <circle cx="150" cy="100" r="50" />
</svg>

canvas: draw/animate
<canvas id="canvasDemo" width="300" height="200" style="border: 1px solid #000000"></canvas>
<script>
  const ctx = document.getElementById('canvasDemo').getContext('2d');
  ctx.beginPath();
  ctx.arc(150, 100, 50, 0, 2 * Math.PI);
  ctx.fillStyle = 'red';
  ctx.strokeStyle = 'red';
  ctx.fill();
  ctx.stroke();
</script>

**1/29: **
Simon HTML ☑ 
4 html pages
main level should be index.html
index.html, play, scores, about

**make sure to be in project directory
./deployFiles.sh -k <yourpemkey> -h <yourdomain> -s simon
./deployFiles.sh -k ~/keys/cs260/cs260.pem -h cs260.click -s simon-html

ssh -i ~/cs260/Lofthouse260.pem ubuntu@tastetrove.click
./deployFiles.sh -k ~/cs260/Lofthouse260.pem -h tastetrove.click -s startup

 sudo systemctl restart caddy.service 
ps -ef | grep index.js
lsof -i :4000
lsof -i :3000 //processes running on port 3000
 

Startup HTML
all pages/footers/images/content to represent everything the application does

PARTS
application data: rendering of application data
authentication: input for account/login, display user’s name
database: rendering of data in the database ex: high scores
hard code some recipes in there
websocket
number of makes on a recipe
wild recipe
./deployFiles.sh -k ~/keys/production.pem -h yourdomain.click -s startup

**1/31: CSS**
CSS introduction 
CSS focused on defining rulesets
A rule is a selector (selects elements to apply rule to) and one or more declarations representing the property to style with the given property rule

![selector](notes/b.png)
EX: select all paragraph elements, 4 declarations (sans-serif font, font size twice as big, navy text, gray shadow)

Three ways to associate CSS to with HTML
-style attribute inside HTML element to assign declarations: <p style="color:green">CSS</p>
-style element to define CSS rules. Should be in the head element to make the rules apply to all elements in doc.
<head>
  <style>
    p {
      color: green;
    }
  </style>
</head>
<body>
  <p>CSS</p>
</body>

-Create a hyperlink reference to an external file containing CSS rules. Must be in head element.
<link rel="stylesheet" href="styles.css" />

elements inherit the rules applied to their parents. If an element has a different property than their parent, the lower level will override the parent.
<body>
  <p><span style="color:black">CSS</span></p>
</body>
body {
  color: red;
}
p {
  color: green;
}
span {
  color: blue;
}

box model: a box of nested boxes
ORDER: content, padding, border, margin

Selectors
Element type selector

body { //all children of the body will have this ond
  font-family: sans-serif;
}
section {
  background: #eeeeee;
  padding: 0.25em;
  margin-bottom: 0.5em;
}
Combinators
section h2 { //apply this to h2 which are descendents of section elements
  color: #004400;
}
Descendant: body section {}: Any section that is a descendant of a body
Child: section > p{}: Any p that is a direct child of a section
General Sibling: p ~ div{}: Any p that has a div sibling
Adjacent sibling: p + div{}: Any p that has adjacent div sibling

h2 ~ p {//paragraphs that are siblings of a level two heading
  padding-left: 0.5em;
}

Class selector
.summary { //do this to things that have class="summary"
  font-weight: bold;
}
p.summary { //all p elements with class = "summary"
  font-weight: bold;
}
//<p class="summary">Summary</p>

ID selector
#physics { //apply to all w id=physics
  border-left: solid 1em purple;
}

p[id="6"]{}

Attribute selector
select based on attributes
p[class='summary'] {
  color: red;
}

Pseudo selector MDN.
select based on positional relationships, mouse interaction, hyperlink, attributes
section:hover { //when mouse hover over the text
  border-left: solid 1em purple;
}

 Declarations
specify property and value to assign when rule selector matches 1+ elements
BIG table of stuff
Units
px: pixels
pt: points
in: inches
cm: centimeters
%: percentage of parent element
em: multiplier of width of the letter m in the parent’s font.
rem: multiplier of width of letter m in root’s font
ex: multiplier of height of element’s font
vw: percentage of viewport’s width
vh: percentage of viewport’s height
vmin: percentage of viewport’s smaller dimension
vmax: percentage of viewport’s larger dimension

p {
  width: 25%;
  height: 30vh;
}

Color
keyword
RGB hex: #00FFAA22
RGB function: rgb(128, 255, 128, .5)
HSL: hsl(180, 30%, 90%, .5)

**2/2: Fonts Animation ☑ CSS practice**
Fonts: https://codepen.io/leesjensen/pen/zYaLgVW

4 font families: Serif, sans-seif, fixed, symbol
import fonts
@font-face {
  font-family: 'Quicksand';
  src: url('https://cs260.click/fonts/quicksand.woff2');
}

p {
  font-family: Quicksand;
}
open source fonts 
-@import url('https://fonts.googleapis.com/css2?family=Rubik Microbe&display=swap');

p {
  font-family: 'Rubik Microbe';
}


Animation
STEPS to animate: (zooming in on text)
keyframes: define the key points of animation and CSS will create a smooth transition from one keyframe to another

p {
  text-align: center;
  font-size: 20vh;

  animation-name: demo; //animate, using keyframes named demo
  animation-duration: 3s; //animation lasts 3 seconds
}

@keyframes demo {
  from {
    font-size: 0vh; //frame
  }

  95% {
    font-size: 21vh; //frame
  }

  to {
    font-size: 20vh; //frame
  }
}

https://codepen.io/kgg511/pen/YzgrExd

**⅖: Responsive design. Grid, Flex: **
reconfigure interface to accommodate screen size
CSS display element: change how HTML element is displayed
<div class="none">None</div>
.none {
  display: none;
}
![responsive](notes/c.png)
tell browser to not scale the page (include in HEAD)
<meta name="viewport" content="width=device-width,initial-scale=1" />

Float: Allows inline elements to wrap around it. right/left/none
aside {
  float: right;
  padding: 3em;
  margin: 0.5em;
  border: black solid thin;}
![responsive](notes/d.png)


Media queries: @media selector detects size of device and applies CSS to it.
@media (orientation: portrait) {
  div pr{
    transform: rotate(270deg); 
//if screen is in portrait mode (short side on top) then rotate all div 270 degrees
  }
}

//if in portrait mode, disappear
@media (orientation: portrait) {
  aside {
    display: none;
  }
}
Grid and Flexbox both automatically resize child elements

Grid
When you want to display group of child elements in responsive grid
use the display property and put grid
.container {
  display: grid; //grid
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
  grid-auto-rows: 300px; //fixed height of 300 pixels
  grid-gap: 1em; //1 em b/t each grid square
}

Flex
| Left Column | Right Column |
|-------------|--------------|
| `<body>` <br> `<header>` <br> `<h1>CSS flex &amp; media query</h1>` <br> `</header>` <br> `<main>` <br> `<section>` <br> `<h2>Controls</h2>` <br> `</section>` <br> `<section>` <br> `<h2>Content</h2>` <br> `</section>` <br> `</main>` <br> `<footer>` <br> `<h2>Footer</h2>` <br> `</footer>` | `body {` <br> `  display: flex; //display all children in flex flow` <br> `  flex-direction: column; //top level put on top of each other` <br> `  margin: 0;` <br> `  height: 100vh;}` <br> `<br>` <br> `header {` <br> `  flex: 0 80px; //0=will not grow, starting height 80px` <br> `  background: hsl(223, 57%, 38%);}` <br> `<br>` <br> `footer {` <br> `  flex: 0 30px;` <br> `  background: hsl(180, 10%, 10%);}` <br> `<br>` <br> `main {` <br> `  flex: 1; //one unit of growth. Only growing thing so gets all space` <br> `  display: flex; //children in flex flow` <br> `  flex-direction: row; //children put next to each other}` <br> `<br>` <br> `section:nth-child(1) {` <br> `  flex: 1; //give 25% of space with this 1/4` <br> `  background-color: hsl(180, 10%, 80%);}` <br> `<br>` <br> `section:nth-child(2) {` <br> `  flex: 3; //content gets the other 3/4` <br> `  background-color: white;}` |

![flex1](notes/e.png)

Media Query: Handle small screen size
@media (orientation: portrait) {
  main {
    flex-direction: column; //stack all items on top instead of side by side
  }
}

@media (max-height: 700px) {
  header {
    display: none; //drop header and footer if screen too small
  }
  footer {
    display: none;
  }
}

how to center text horizontal & vertical
flex: 1;
  display: flex;
  align-items: center; /* Center vertically */
  justify-content: center; /* Center horizontally */
  flex-direction: column; //display on top of each other

alter margin if two words on top of each other have some annoying space you want to overwrite
margin-top: 0; //NO space on top of word
margin-bottom: 0; //NO space below word

h2.login: The h2 element with the class=login
header h2: The h2 elements inside header (all descendants)

2/7: Debugging CSS, ☑ CSS frameworks, Simon CSS, ☑ Startup CSS
https://codepen.io/kgg511/pen/GReMQJM
Debugging CSS, 
open up in browser, inspect, and then look to see why
Styles pane shows CSS properties applied to selected element
align-items: center; centers the child elements vertically within the flex container.
justify-content: center; centers the child elements horizontally within the flex container.
Since text-align is more relevant for inline and inline-block elements, it may not have a noticeable effect on a flex container or its child elements

CSS frameworks 
Provide functions/components commonly used in web applications

Tailwind
instead of using rulesets, uses smaller definition that are applied to individual HTML elements. Moves CSS directly to html
<div class="pt-6 md:p-8 text-center md:text-left space-y-4">

Bootstrap
https://getbootstrap.com/docs/5.2/getting-started/introduction/#cdn-links

integrate Bootstrap by referencing Bootstrap CSS files from their CDN
add HTML link elements to head element like THIS:
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
    crossorigin="anonymous"
    />
  </head>
  <body>
    ...
  </body>
</html>

if use Bootstrap components that use javascript, include bootstrap JS module: Put this at the end of your HTML body element: 
<body>
  ...
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"
  ></script>
</body>

later include NPM to get bootstrap by running this in console npm install bootstrap@5.2.3 **Update to newest version

Using Bootstrap
one linked in HTML files, we can use components
// Bootstrap styled button
<button type="button" class="btn btn-primary">Bootstrap</button>

// Default browser styled button
<button type="button">Plain</button>

2/9: The flip effect

<div class="flip-card">
    <div class="flip-card-inner">
        <div class="flip-card-front">
            <!-- Front content goes here -->
        </div>
        <div class="flip-card-back">
            <!-- Back content goes here -->
        </div>
    </div>
</div>

https://unsplash.com/collections/2533969/food-

**2/9: JavaScript introduction, JavaScript Console, Adding JavaScript to HTML, Types, operators, conditionals, and loops, String**

JavaScript introduction, 
weakly typed language based on C, Java, Scheme
Not compiled
function join(a, b) {
  return a + ' ' + b;
}
console.log(join('Hello', 'world'));

JavaScript Console, 
console.log('hello %s', 'world');

specify CSS declarations to style log output
console.log('%c JavaScript Demo', 'font-size:1.5em; color:green;');
Timers: See how long a piece of code is running by wrapping in 
console.time('demo time');
// ... some code that takes a long time.
console.timeEnd('demo time');
// OUTPUT: demo time: 9762.74 ms
Count: See how many times a block of code is called
console.count('a');
// OUTPUT: a: 1
console.count('a');
// OUTPUT: a: 2

Adding JavaScript to HTML
either put js directly into script element or just use src attribute of script to reference JS file.
<head>
  <script src="javascript.js"></script>
</head>
<body>
  <button onclick="sayHello()">Say Hello</button> //using function from 
  <button onclick="sayGoodbye()">Say Goodbye</button>
  <script>
    function sayGoodbye() {
      alert('Goodbye');
    }
  </script>
</body>

<button onclick="let i=1;i++;console.log(i)">press me</button>
//do this code when clicked

Types, operators, conditionals, and loops, 
let x = 1; //you can change the value of this variable
const y = 2; //you cannot change the value
**avoid keyword var

PRIMITIVES
![primitives](notes/primitives.png)
you don’t have to declare a variable before using it so it could have type undefined

Object Types
![object](notes/object.png)

weakly typed. A variable always has a type but it can change when assigned to a new value. Or might be automatically converted
2 + ‘3’ = ‘23’ //addition makes it string
2 * ‘3’ = 6 //multiplication makes it number
[2] + [3] = ‘23’
true + null = 1
true + undefined = NaN

weird stuff with equality operator so JS has strict equality operators that do not do type conversion when converting equality
1 === ‘1’ is false, null ===undefined is false, ‘’ === false

Conditionals
if(){}
else if(){}
else{}

a === 1 ? console.log(1) : console.log('not 1');
|| ! &&
do{} while()
for(let i = 0…){}
while(){}
for(const name in obj){} //if obj is array it will be the index, dictionaries its keys
for(const val of arr){} //array values
break, continue

String
‘’ or “”
` mean string literal that may contain js that is evaluated and concatenated to string. Or create multiline strings
console.log(`string ${l + (1 + 1)} text`); //eval l+ (1=1) and concat with the rest of string

JS supports unicode. string is 16-bit unsigned integer

String functions
![string](notes/string.png)
s.length(), s.split(‘:’)

2/12: Functions, Arrow functions, Arrays, JSON, Objects and classes

Functions
functions are objects -> can be given a name, passed as parameter, returned, or referenced from object/array
type inferred by assignment of value to parameter
If parameter not provided then the value of thee parameter is undefined when the function executes
function labeler(value, title = 'title') {
  console.log(`${title}=${value}`);
}
labeler(); // OUTPUT: title=undefined

labeler('fish'); // OUTPUT: title=fish
labeler('fish', 'animal'); // OUTPUT: animal=fish

Anonymous functions
console.log(
  doMath(function (a, b) {return a - b; },
    5,3));
const add = function (a, b) {return a + b;};

Inner functions: Declare functions inside other functions
function labeler(value) {
  function stringLabeler(value) {
    console.log('string=' + value);
  }
  if (typeof value == 'string') {
    stringLabeler(value);
}

Arrow functions
const a = [1, 2, 3, 4];
a.sort((v1, v2) => v1 - v2); //pass in function that takes two parameters and returns difference
return keyword is optional if no {} and it has only one expression. Automatically returns result of expression. However if {} are included then it behaves like regular function and need return
()=>{return 3;}

This pointer: Arrow function inherit this pointer from the scope of creation.
closure: function can continue referencing creation scope even after passed out of scope.
function makeClosure(a) {
  a = 'a2';
  const b = 'b2';
  return () => [a, b]; //this function remembers what a & b are from this scope
}

Example:
//when user scrolls, call debounce
window.addEventListener(
  'scroll',
  debounce(500, () => {
    console.log('Executed an expensive calculation');
  })
);

//if function call again before window times out it resets timeout
function debounce(windowMs, windowFunc) {
  let timeout;
  return function () {
    console.log('scroll event');
    clearTimeout(timeout);
    timeout = setTimeout(() => windowFunc(), windowMs);
  };
}

Arrays
const a = [1, 2, 3];
![arrays](notes/arrays.png)

JSON
easily convertible to and from JS objects
JSON contains one of these types: string, number, boolean, array, object {“a”:”1”, “b”:”hi”}, null
JSON may have different data types within the same documents
Objects contains 0+ key value pairs. Key is always a string, value must be one of the JSON data types. {} for objects

Json Document Example
{
  "class": { //object with 2 key-value pairs
    "title": "web programming",
    "description": "Amazing"
  },
  "enrollment": ["Marco", "Jana", "فَاطِمَة"], //array w 3 elements
  "start": "2025-02-01", //string
  "end": null //null, indicates end date is unknown
}

Convert to JS
const obj = { a: 2, b: 'crockford', c: undefined }; //make object
const json = JSON.stringify(obj); //turn object into a json
const objFromJson = JSON.parse(json); //turn JSON back into object
To parse you are just passing a long string so it might contain multiple items not just one object

JS Objects and classes
JS object represents a bunch of name-value pairs called properties
property name must be String or Symbol, value can be any type

const obj = new Object({ a: 3 }); //create Object with one property
obj['b'] = 'fish'; //add another property
obj.c = [1, 2, 3]; //add another property
obj.hello = function () {
  console.log('hello');
};

The term ‘object’ can refer to standard JS objects like Promise/Map/Object/Function/Data,etc or JS Object object new Object() or a JS object you create.

Object-literals: Declare variable of object type like this also:
const obj = {
  a: 3,
  b: 'fish',
};

static Object functions:s
![static](notes/static.png)
Object.entries(obj)

Constructor: Any function that returns an object is considered a constructor and can be involved with new
function Person(name) {
  return {
    name: name,
    log: function () {
      console.log('My name is ' + this.name);
    },
  };
}
const p = new Person('Eich');
p.log();

this pointer: Depends on the scope of its use, but here refers to a pointer to the object.
Classes: You can use classes to define object (reusable component). Have explicit constructor

class Person {
  constructor(name) {
   #name

    this.name = name; //not private
    this.#name = name; //makes the property private

  }
  log() {
    console.log('My name is ' + this.name);
  }
}

Inheritance: 
class Person {
  constructor(name) {
    this.name = name;
  }

  print() {
    return 'My name is ' + this.name;
  }
}

class Employee extends Person {
  constructor(name, position) {
    super(name);
    this.position = position;
  }

  print() {
    return super.print() + '. I am a ' + this.position;
  }
}

const e = new Employee('Eich', 'programmer');
console.log(e.print());

**2/14: Regular expressions, Rest and spread, Exceptions, Destructuring**

Regular expressions
create with class constructor of regex literal
const objRegex = new RegExp('ab*', 'i');
const literalRegex = /ab*/i;
the string class has functions that accept regex: match/replace/search/split
const petRegex = /(dog)|(cat)|(bird)/gim;
const text = 'Both cats and dogs are pets, but not rocks.';
text.match(petRegex); // RETURNS: ['cat', 'dog']

Rest and spread
Rest: Pass in as many parameters as you want. **only on last parameter
function hasNumber(test, ...numbers) {
  return numbers.some((i) => i === test);
}
hasNumber(2, 1, 2, 3);

Spread: The opposite of rest. Takes an iterable and expands it into a functions parameters
function person(firstName, lastName) {
  return { first: firstName, last: lastName };
}
const p = person(...['Ryan', 'Dahl']);

Exceptions
try {
  // normal execution code
} catch (err) {
  // exception handling code
} finally {
  // always called code
}
only throw exceptions in exceptional circumstances
Fallbacks: alternative thing to do when something isn’t available.

Destructuring
Descructuring: pulling individual items out of an existing one, removing structures. 
const a = [1, 2, 4, 5];
// destructure the first two items from a, into the new variables b and c
const [b, c] = a; //set b to the first item of a, c to the second item of a

const [b, c, ...others] = a; //1, 2, [4,5]

Destructuring objects: Specify the properties to pull.
const o = { a: 1, b: 'animals', c: ['fish', 'cats'] };
const { a, c } = o;

const o = { a: 1, b: 'animals', c: ['fish', 'cats'] };
const { a: count, b: type } = o; //pull out a & b but rename them

const { a, b = 22 } = {}; //trying to pull a & b from empty object. a will be undefined but b has a default value so it will be 22.
const [c = 44] = []; //try to take c from list oh not in there so just take default value.

[a] = [1, 2, 3]; //take 1st element from list and put it in a (a is not a list)

**2/16: Scope, Modules, Document object model (DOM), LocalStorage**
https://codepen.io/kgg511/pen/oNVdWLQ

Scope
4 Types of Scope
Global: visible to all
Module: visible to all code in module
Function: visible within function
Block: visible within {}

var ignores block scope. (don’t use var use let or const)
this: a variable that points to an object that contains the context within the scope of the currently executing line of code. You can reference anywhere in a program, so that value depends on context.
Global (outside function/object): runtime environment
Function (inside function): Refers to object that owns function (either object you defined or globalThis). In strict mode global function is undefined
Object (inside object): Refers to the object (ex: inside class)
// global scope
console.log('global:', this);
console.log('globalThis:', globalThis);

// function scope for a global function
function globalFunc() {
  console.log('globalFunctionThis:', this);
}
globalFunc();

// object scope
class ScopeTest {
  constructor() {
    console.log('objectThis:', this);
  }

  // function scope for an object function
  objectFunc() {
    console.log('objectFunctionThis:', this);
  }
}

Closure: Includes a function and its surrounding state. Whatever variables are accessible when are function is created are available inside the function even if you pass the function in a different scope.
However, in arrow functions they inherit the this pointer of the context in which they were CREATED (called). arrow functions do not have their own this context. They just capture this from the surrounding scope when the function is created.
globalThis.x = 'global';
const obj = {
  x: 'object',
  f: () => console.log(this.x), //created in the global context so has global this
//Arrow functions capture this at time of creation
};
obj.f();

if the function instead returns an arrow function then the this pointer is back to the objects this pointer. 
const obj = {
  x: 'object',
  make: function () { //created inside a function so it takes this from there which is obj
    return () => console.log(this.x);},
};
const f = obj.make();
f(); //function is called here
// OUTPUT: object

JS Modules
Node.js modules: CommonJS modules
JavaScript modules: ES modules

ES modules
file 1
export function alertDisplay(msg) { //export keyword so it can be imported elsewhere
  alert(msg);}

file2
import { alertDisplay } from './alert.js';
alertDisplay('called from main.js');

Modules can only be called from other modules. You can’t access JS in a module from global scope of non-module JS
ES Modules in browser:
index.html
<script type="module">
  import { alertDisplay } from './alert.js';
  alertDisplay('module loaded');
</script>

To use module in the global scope that our HTML/non-module JS executes in, must leak into global scope. Either attach event handler or add function to global window object.
<html>
  <body>
    <script type="module">
      import { alertDisplay } from './alert.js';
      window.btnClick = alertDisplay;

      document.body.addEventListener('keypress', function (event) {
        alertDisplay('Key pressed');
      });
    </script>
    <button onclick="btnClick('button clicked')">Press me</button>
  </body>
</html>

if you use web framework bundler you don’t have to worry about differentiating global scope & ES scope.

☑ Document object model (DOM)
DOM: object representation of the HTML elements that the browser uses to render display
browser gives access to DOM through global variable document that points to root element of DOM
everything in HTML document gets a node in DOM. Form big tree with <img src="dom.jpg"/> node at top

Accessing DOM
All HTML elements use DOM element interface
interface provides ability to iterate over child elements, access parent, manip child
const listElements = document.querySelectorAll('p'); //select all p elements
for (const el of listElements) {  // Output the text content of each <p> element to the console
  console.log(el.textContent);
}

Modify DOM
create new element: create element, insert into tree by appending to existing element
function insertChild(parentSelector, text) {
  const newChild = document.createElement('div'); //create
  newChild.textContent = text;
  const parentElement = document.querySelector(parentSelector); //append
  parentElement.appendChild(newChild);
}
insertChild('#courses', 'new course');

delete:
const el = document.querySelector(elementSelector); 
  el.parentElement.removeChild(el); //we ask its parent to delete its child

Inject HTML
el.innerHTML = '<div class="injected"><b>Hello</b>!</div>';
→ HUGE hack risk, they can basically run whatever code that they want. So make sure that HTML cannot be manipulated. Don’t use .innerHTML, use DOM manipulation functions.

Event Listeners
All DOM elements can attach function that gets called when event occurs on element.
Clipboard(cut/copy/paste), focus, keyboard, mouse, text selection
const submitDataEl = document.querySelector('#submitData');
submitDataEl.addEventListener('click', function (event) {
  console.log(event.type);
});
add directly in HTML
​​<button onclick='alert("clicked")'>click me</button>

document.styleSheets[0].insertRule("#output table {border-collapse: collapse;}");
//insert a rule on a selector for all tables which is ‘border-collapse..’


LocalStorage
browser’s localStorage API allows you to persistently store/retrieve data across different pages.
it is also a cache for when data can’t be obtained from server

Main Functions
![storage1](notes/localStorage.png)
local storage value must be string/number/boolean. To store object convert to JSON string and just JSON.parse() when retrieve

![storage2](notes/localStorage2.png)

**2/20:☑ Promises, Async/await**
https://codepen.io/kgg511/pen/ExMLRqG

Promises
-JS is single threaded, meaning it only executes one piece of code at the same time
-Asynchronously execute code using Promise
Promise object States
-Pending: Running asynchronously
-Fulfilled: Successfully completed
-Rejected: Failed to complete

Create
new Promise(executor function that runs asynch op) //executor called automatically

EXAMPLE
const delay = (msg, wait) => {
  setTimeout(() => {
    console.log(msg, wait);
  }, 1000 * wait);
};

new Promise((resolve, reject) => {
  for (let i = 0; i < 3; i++) {
    delay('In promise', i); //calls this function 3 times in succession but schedule messages after delay
  }
});

for (let i = 0; i < 3; i++) {
  delay('After promise', i); //it must wait for each to finish before calling the next one
}

Resolve and Reject (setting state)
Promise executor function takes functions resolve & reject as parameters
calling resolve sets promise to fulfilled state, calling reject sets to rejected state

const coinToss = new Promise((resolve, reject) => {
  setTimeout(() => {
    if (Math.random() > 0.5) {
      resolve('success'); //if case happens change state to succcess
    } else {
      reject('error');
    }
  }, 10000);
});

coinToss //attach to the object
  .then((result) => console.log(`Coin toss result: ${result}`))
  .catch((err) => console.log(`Error: ${err}`))
  .finally(() => console.log('Toss completed'));

Then, catch, finally
promise object has three functions: then,catch,finally
then: called if promise fulfilled
catch: called if promise rejected
finally: called after all processing

Observer Pattern
Observers also do asyn processing. 
promises immediately begin to execute when created
observers form a pipeline that you pass an execution object into. Can be reused.

Modify the CodePen to include a new function that makes the pizza and include it in the promise chain.

MULTIPLE PROMISES
generally one catch at the end, but you can have many then
placeOrder(order)
    .then((order) => cookOrder(order)) //once place order, Cook the order
    .then((order) => serveOrder(order))
    .catch((order) => { //if at any point it fails call this
      orderFailure(order);
    });


 Async/await
https://codepen.io/kgg511/pen/XWGqBry
await requires the function it is awaiting to be async and to return a promise (manually resolve promise inside function with resolve())

more concise representation of promise
await: block until promise state moves to fulfilled or throw exception if rejected

Create equivalent executions with these 2 things

1.promise then/catch chain
coinToss()
  .then((result) => console.log(`Toss result ${result}`))
  .catch((err) => console.error(`Error: ${err}`))
  .finally(() => console.log(`Toss completed`));


2.using async/await
try {
  const result = await coinToss(); //wait until move to success/error
  console.log(`Toss result ${result}`); //success
} catch (err) {
  console.error(`Error: ${err}`); //reject
} finally {
  console.log(`Toss completed`); //finally
}

async
You cannot await unless it is called at the top level of JS OR it is in a function defined with async.
async declares a function that returns a promise. Turns function into async function that can make asynch requests
If you just put async in the def of a function it turns into a promise that is immediately resolved
If the async function returns a promise then it’s going to create a promise that is pending until somewhere else you do await function_name().
async function cow() {
  return new Promise((resolve) => {
    resolve('moo');
  });
}
console.log(cow());
// OUTPUT: Promise {<pending>}

await
await wraps a call ot the async function and blocks execution until the promise has resolved, which returns the result of the promise.
console.log(cow()); // OUTPUT: Promise {<pending>}
console.log(await cow()); //OUTPUT: moo

Together
application: call fetch web API on endpoint. 
two promises: network call, converting the result to JSOn
Promise implementation
const httpPromise = fetch('https://simon.cs260.click/api/user/me');
const jsonPromise = httpPromise.then((r) => r.json());
jsonPromise.then((j) => console.log(j));
console.log('done');

aync/await implementation
const httpResponse = await fetch('https://simon.cs260.click/api/user/me');
const jsonResponse = await httpResponse.json();
console.log(jsonResponse));
console.log('done');


**2/21: Debugging JavaScript, Simon JavaScript, Startup JavaScript**

Debugging JavaScript
console tab you can see print statements or run JS code there to see variable values
Sources: you can set breakpoints by clicking the numbers. Then just reload the page and it will stop there

**Midterm line**
--------------------------
MIDTERM 2/26: The internet, Web servers, Domain names
The internet
internet connects independent networks and computing devices
to talk to another a device must have an IP address. Domain names converted to IP
connect by asking for connection route to device
traceroute: determine hops in a connection
traceroute byu.edu
sending of data uses TCP/IP model
layers: 
Application layer: web user functionality
Transport: breaks into chunks and sends data
Internet: makes the connection. 
Link layer: physical connections and hardware

![input](notes/internet.png)
Web servers
web server hosts a web service that knows how to accept incoming internet connections and speak HTTP protocol

package main

import (
	"net/http"
)
func getTime(w http.ResponseWriter, r *http.Request) {
	io.WriteString(w, time.Now().String())
}
func main() {
	fs := http.FileServer(http.Dir("./public_html")) // Serve up files found in public_html
	http.Handle("/", fs)
	http.HandleFunc("/api/time", getTime) // Dynamically provide data
	http.ListenAndServe(":3000", nil) // Listen for HTTP requests
}
curl localhost:3000/api/time -> make HTTP request

web service gateways: 
each service on different port
service gateway listens on common HTTPs port 443, looks at request, and maps to services running on different ports. CADDY will be gateway
Microservices: web services that provide single functional purpose. For one microservice you may need to deploy 1000 instances of it to support 1 million users
Serverless: server removed and write function to speak HTTP
Domain names
get ip address for any domain using dig: dig amazon.com
broken into root domain, 1+ subdomain prefixes
react.simon.cs260.click //subdomain + root in bold
DNS: once domain name is in the registry it can be listed with DNS server and associated with IP address
DNS database records facilitate mapping names to IP addresses
A record: straight mapping from domain name to ip address
CNAME record: maps one domain name to another domain name

**2/28: Web Services Introduction, URL, Ports, HTTP,  Fetch**

Web Services Introduction
all web programming requests b/t devices use HTTPs to exchange data
make requests to external services to get external data. 
give URL of web service to fetch function built in browser
create web service: fetch requests to store data, security, tasks. web service is backend.
functions provided by web service are called endpoints
access web service endpoints via fetch function

can make requests to other web services.
![input](notes/2/28.png)
URL
location of web resource: web page, font, image, database record, JSON object ,etc
only required parts are scheme and domain name
<scheme>://<domain name>:<port>/<path>?<parameters>#<anchor>

Scheme: protocol required to ask for resource
Domain name: domain name that owns resource represented by URL: byu.edu
Port: network port used to connect to domain server: 3000
Path: path to resource on the domain. Does not have to be on file system with this path. 
Parameters: list of key value pairs. /school/byu/user/8014
filter=names&highlight=intro,summary
Anchor: sub-location in the resource. summary

URN: unique resource name that does not specify location information
URI: uniform resource identifier: URL/URN
web programming always uses URL

Ports
To connect to device you need IP address and port
port allows single device to support multiple protocols and different types of services
0-1023: standard protocols, 1024-49152: ports assigned to requesting entities, 49152-65535 create dynamic connections to a device.
when you built web server you externally exposed port 22 so you could use ssh to open remote console on server, port 443 for secure HTTP communication, port 80 for unsecure HTTP communication
![input](notes/2/282.png)
caddy is listening on 80 and 443
when get request on 80, redirect to port 443 to use secure connection
request on 443 -> examines path in HTTP request, if match static file, read file. If match def for gateway service, caddy makes connection on that service’s port and passes request
one port per service

HTTP
web client and server exchange http requests and responses
REQUEST
GET /hypertext/WWW/Helping.html HTTP/1.1
Host: info.cern.ch
Accept: text/html

<verb> <url path, parameters, anchor> <version>
[<header key: value>]*
[

  <body>
]
—-----------------------------
RESPONSE
<version> <status code> <status string>
[<header key: value>]*
[
  <body>
]
![input](notes/2/283.png)
Status codes:
1xx: informational, 2xx: success, 3xx: redirect to another location, 4xx: client errors, 5xx: server errors
headers: specify metadata
![input](notes/2/284.png)
body: format of body defined by Content-Type header
Cookies: 
an HTTP request knows nothing about previous/future request
method of tracking state. Generated by server and passed to client as HTTP header
HTTP/2 200
Set-Cookie: myAppCookie=tasty; SameSite=Strict; Secure; HttpOnly

Client caches and returns as HTTP header

HTTP/2 200
Cookie: myAppCookie=tasty


Fetch
fetch API is preferred way to make HTTP requests
takes in URL, returns a promise. then function takes callback function that is called when the requested URL content is  obtained. If returned content is of type json then json function on response object to convert to js
fetch request
fetch('https://api.quotable.io/random')
  .then((response) => response.json())
  .then((jsonResponse) => {
    console.log(jsonResponse);
  });
response
{
  content: 'Never put off till tomorrow what you can do today.',
  author: 'Thomas Jefferson',
};

POST request
fetch('https://jsonplaceholder.typicode.com/posts', {
  method: 'POST',
  body: JSON.stringify({
    title: 'test title',
    body: 'test body',
    userId: 1,
  }),
  headers: {
    'Content-type': 'application/json; charset=UTF-8',
  },
})
  .then((response) => response.json())
  .then((jsonResponse) => {
    console.log(jsonResponse);
  });

https://codepen.io/kgg511/pen/qBvgrmK

3/1: Node.js
Chromium browsers use V8. Node.js runs V8 engine inside console application. When run JS in Chrome/Node.js, V8 reads code and executes
install Node version manager and use to install Node.js into development environment.
node -v    → tells you what version of node you have. Use to verify it’s installed.
Execute line of JS with Node.js using -e
node -e "console.log(1+1)"
Running programs: write .js file. Then execute with: node filename.js
run in interpreter mode with just node

Node package manager
To load a package:initiailize code to use NPM. install page locally using NPM, then include require statement in code that references package names.
mkdir npmtest //directory for javascript
cd npmtest
npm init -y //initialize code to use NPM
many pre existing packages NPM website

Package.json
directory will contain file named package.json. Includes metadata about project, commands you can execute, packages project depends upon.
{
  "name": "npmtest",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "keywords": [],
  "author": "",
  "license": "ISC",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  }
}

npm install give-me-a-joke //install package -> now in package 
"dependencies": {
    "give-me-a-joke": "^0.5.1"
  }

npm uninstall packageName //remove package dependency

NPM will create file called package-lock.json and directory node_modules. node_modules will get large, do not check into source control system, put node_modules in gitignore file
when clone github code, run npm install in project directory to install previously installed packages

Using the package
const giveMeAJoke = require('give-me-a-joke'); //reference package name as parameter to requi
giveMeAJoke.getRandomDadJoke((joke) => { //call its getRandomDadJoke function
  console.log(joke);
});

STEPS
Create your project directory
Initialize it for use with NPM by running npm init -y
Make sure .gitignore file contains node_modules
Install any desired packages with npm install <package name here>
Add require('<package name here>') to your application's JavaScript
Use the code the package provides in your JavaScript
Run your code with node index.js

¾: ☑ Express, Simon service, ☑ Startup Service

Express 
Node package Express provides support for:
Routing requests for service endpoints
Manipulating HTTP requests with JSON body content
Generating HTTP responses
Using middleware to add functionality

npm install express
const express = require('express');
const app = express(); 
app.listen(8080); //listen for HTTP requests on specified port

Defining Routes
app.get('/store/:storeName', (req, res, next) => { //route for HTTP GET for this path
  res.send({name: req.params.storeName}); //add parameter name with :
});
curl localhost:8080/store/orem

URL path matching pattern
callback function invoked when pattern matches
req: HTTP request object
res: HTTP response object
next: routing function that Express expects to be called if routing function wants another function to generate response.

// Pure regular expression
app.delete(/\/store\/(.+)/, (req, res) => res.send({delete: req.params[0]}));

using middleware
mediator: loads middleware and determine order of execution. Request comes to it, mediator passes to middleware components
Express has some middleware functions. routing functions are also middleware functions. HOWEVER, routing functions are only called in pattern matches, middleware functions are called for every HTTP request unless preceding middleware function doesn’t call next.
function middlewareName(req, res, next) //next middleware function
create your own middleware
app.use((req, res, next) => {
  console.log(req.originalUrl);
  next();
});

**order you add middleware to Express controls order that they are called in.
Built-in middleware: app.use(express.static('public'));
Third-party middleware: 
npm install cookie-parser
const cookieParser = require('cookie-parser');

app.use(cookieParser());

app.post('/cookie/:name/:value', (req, res, next) => {
  res.cookie(req.params.name, req.params.value); //add cookie function
  res.send({cookie: `${req.params.name}:${req.params.value}`});
});
app.get('/cookie', (req, res, next) => {
  res.send({cookie: req.cookies}); //add req.cookies object
});


error handling middleware
function errorMiddlewareName(err, req, res, next) //basic structure
app.use(function (err, req, res, next) { ///any error runs 
  res.status(500).send({type: err.name, message: err.message});
});

app.get('/error', (req, res, next) => { //add endpoint that generates an error
  throw new Error('Trouble in river city');
});

EXAMPLE WEB SERVICE BUILT USING EXPRESS


Simon service

EXAMPLE
endpoints for getting and updating scores
third party endpoints for inspirational quotes

Endpoint Definitions

GetScores: Get latest scores
curl -X GET /api/scores
#Response
{ "scores":[
  {"name":"Harvey", "score":"337", "date":"2022/11/20"},
  {"name":"도윤 이", "score":"95", "date":"2019/05/20"}
]}

SubmitScore: submit score for consideration
curl -X POST /api/score -d '{"name":"Harvey", "score":"337", "date":"2022/11/20"}'
#Response
{ "scores":[
  {"name":"Harvey", "score":"337", "date":"2022/11/20"},
  {"name":"도윤 이", "score":"95", "date":"2019/05/20"}
]}

Third Party endpoints
function displayQuote(data) {
  fetch('https://api.quotable.io/random')
    .then((response) => response.json())
    .then((data) => {
      const containerEl = document.querySelector('#quote');

      const quoteEl = document.createElement('p');
      quoteEl.classList.add('quote');
      const authorEl = document.createElement('p');
      authorEl.classList.add('author');

      quoteEl.textContent = data.content;
      authorEl.textContent = data.author;

      containerEl.appendChild(quoteEl);
      containerEl.appendChild(authorEl);
    });
}

Steps to convert simon to service
move .html, .js, favicon.io, .css to sub-directory public.  When running service the static file middleware reads frontend code from here and returns to browser.
app.use(express.static('public'));
inside project directory run npm init -y
.gitignore to ignore node_modules
install express via npm install express
create index.js in root of project. node.js calls this
add Express JS to host application static content
modify simon application code to make service endpoint requests to HTTP service code
async function loadScores() {
  const response = await fetch("/api/scores")
  const scores = await response.json()

debug node.js video
set up breakpoints in vscode
curl localhost:3000/api/user/test

./deployService.sh -k <yourpemkey> -h <yourdomain> -s simon
./deployService.sh -k ~/cs260/Lofthouse260.pem -h tastetrove.click -s simon

Startup Service






![input](notes/internet.png)
